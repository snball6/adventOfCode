const scoresJson = {"members":{"1536781":{"completion_day_level":{"1":{"2":{"get_star_ts":1638378029},"1":{"get_star_ts":1638372149}},"2":{"1":{"get_star_ts":1638459485},"2":{"get_star_ts":1638462660}}},"local_score":73,"last_star_ts":1638462660,"stars":4,"id":"1536781","global_score":0,"name":"MitchZo"},"1076332":{"id":"1076332","stars":9,"last_star_ts":1639103806,"global_score":0,"name":"Kealy Williams","completion_day_level":{"3":{"1":{"get_star_ts":1638746254}},"4":{"1":{"get_star_ts":1638754015},"2":{"get_star_ts":1638754849}},"5":{"1":{"get_star_ts":1638841804}},"1":{"2":{"get_star_ts":1638380011},"1":{"get_star_ts":1638379746}},"7":{"1":{"get_star_ts":1639103806}},"2":{"1":{"get_star_ts":1638459521}},"6":{"1":{"get_star_ts":1639017778}}},"local_score":130},"1915282":{"last_star_ts":1639090597,"stars":3,"id":"1915282","global_score":0,"name":"Lisa Ho","completion_day_level":{"1":{"2":{"get_star_ts":1639089926},"1":{"get_star_ts":1639089646}},"2":{"1":{"get_star_ts":1639090597}}},"local_score":17},"1624251":{"local_score":95,"completion_day_level":{"1":{"2":{"get_star_ts":1638484539},"1":{"get_star_ts":1638467656}},"4":{"1":{"get_star_ts":1639020974}},"3":{"2":{"get_star_ts":1639013503},"1":{"get_star_ts":1638509999}},"2":{"1":{"get_star_ts":1638485186},"2":{"get_star_ts":1638485400}}},"global_score":0,"name":"tone-segura","last_star_ts":1639020974,"stars":7,"id":"1624251"},"1666139":{"completion_day_level":{},"local_score":0,"stars":0,"id":"1666139","last_star_ts":"0","name":null,"global_score":0},"1647175":{"local_score":62,"completion_day_level":{"3":{"1":{"get_star_ts":1639014021}},"1":{"1":{"get_star_ts":1638377636},"2":{"get_star_ts":1638377963}},"2":{"2":{"get_star_ts":1638842526},"1":{"get_star_ts":1638684019}}},"global_score":0,"name":"Matthew Scholand","last_star_ts":1639014021,"id":"1647175","stars":5},"1236060":{"name":"Giovanni Sturla","global_score":0,"id":"1236060","stars":0,"last_star_ts":"0","local_score":0,"completion_day_level":{}},"1221136":{"local_score":223,"completion_day_level":{"1":{"2":{"get_star_ts":1638411032},"1":{"get_star_ts":1638410302}},"3":{"1":{"get_star_ts":1638589885},"2":{"get_star_ts":1638647947}},"14":{"1":{"get_star_ts":1639656162}},"6":{"1":{"get_star_ts":1638938339},"2":{"get_star_ts":1638938370}},"2":{"1":{"get_star_ts":1638498901},"2":{"get_star_ts":1638499454}},"10":{"1":{"get_star_ts":1639118314},"2":{"get_star_ts":1639119768}},"8":{"2":{"get_star_ts":1639112861},"1":{"get_star_ts":1639018522}},"7":{"2":{"get_star_ts":1638930923},"1":{"get_star_ts":1638929146}}},"global_score":0,"name":"George Lund","stars":15,"id":"1221136","last_star_ts":1639656162},"1032152":{"completion_day_level":{"4":{"1":{"get_star_ts":1638821862},"2":{"get_star_ts":1638822590}},"5":{"2":{"get_star_ts":1638903065},"1":{"get_star_ts":1638891688}},"7":{"1":{"get_star_ts":1639488793},"2":{"get_star_ts":1639489960}},"8":{"1":{"get_star_ts":1639490604}},"3":{"2":{"get_star_ts":1638734524},"1":{"get_star_ts":1638539275}},"1":{"1":{"get_star_ts":1638393039},"2":{"get_star_ts":1638393565}},"2":{"2":{"get_star_ts":1638466033},"1":{"get_star_ts":1638464807}},"6":{"1":{"get_star_ts":1638909961},"2":{"get_star_ts":1638909999}}},"local_score":225,"id":"1032152","stars":15,"last_star_ts":1639490604,"name":"BurnsAndy","global_score":0},"1727519":{"completion_day_level":{"9":{"2":{"get_star_ts":1639031472},"1":{"get_star_ts":1639028208}},"10":{"2":{"get_star_ts":1639115229},"1":{"get_star_ts":1639114004}},"8":{"1":{"get_star_ts":1638976311},"2":{"get_star_ts":1638979007}},"7":{"1":{"get_star_ts":1638853790},"2":{"get_star_ts":1638853947}},"13":{"2":{"get_star_ts":1639404844},"1":{"get_star_ts":1639404339}},"5":{"1":{"get_star_ts":1638761056},"2":{"get_star_ts":1638762771}},"4":{"1":{"get_star_ts":1638681139},"2":{"get_star_ts":1638681356}},"12":{"1":{"get_star_ts":1639366579},"2":{"get_star_ts":1639368229}},"14":{"2":{"get_star_ts":1639523881},"1":{"get_star_ts":1639483250}},"6":{"1":{"get_star_ts":1638811172},"2":{"get_star_ts":1638811208}},"15":{"2":{"get_star_ts":1639594933},"1":{"get_star_ts":1639592942}},"11":{"1":{"get_star_ts":1639200503},"2":{"get_star_ts":1639200707}},"2":{"1":{"get_star_ts":1638496234},"2":{"get_star_ts":1638497354}},"1":{"1":{"get_star_ts":1638454097},"2":{"get_star_ts":1638454522}},"3":{"2":{"get_star_ts":1638513824},"1":{"get_star_ts":1638512313}}},"local_score":532,"id":"1727519","stars":30,"last_star_ts":1639594933,"global_score":0,"name":"Murtuza Boxwala"},"532224":{"global_score":0,"name":"UncleTed","id":"532224","stars":18,"last_star_ts":1640218145,"local_score":277,"completion_day_level":{"8":{"1":{"get_star_ts":1638967737}},"10":{"1":{"get_star_ts":1639142199},"2":{"get_star_ts":1639179778}},"7":{"1":{"get_star_ts":1638883097},"2":{"get_star_ts":1638929101}},"22":{"1":{"get_star_ts":1640218145}},"5":{"1":{"get_star_ts":1638841738}},"21":{"1":{"get_star_ts":1640105561}},"4":{"1":{"get_star_ts":1638675196}},"6":{"2":{"get_star_ts":1638917120},"1":{"get_star_ts":1638851847}},"2":{"1":{"get_star_ts":1638500045},"2":{"get_star_ts":1638500282}},"17":{"1":{"get_star_ts":1640054167}},"1":{"1":{"get_star_ts":1638450048},"2":{"get_star_ts":1638507128}},"3":{"2":{"get_star_ts":1638577063},"1":{"get_star_ts":1638572541}}}},"1105834":{"completion_day_level":{"10":{"2":{"get_star_ts":1639141323},"1":{"get_star_ts":1639139741}},"7":{"1":{"get_star_ts":1638877430},"2":{"get_star_ts":1638879129}},"13":{"1":{"get_star_ts":1639396656},"2":{"get_star_ts":1639439369}},"4":{"2":{"get_star_ts":1638633235},"1":{"get_star_ts":1638632343}},"6":{"2":{"get_star_ts":1638792889},"1":{"get_star_ts":1638791299}},"18":{"1":{"get_star_ts":1640463906},"2":{"get_star_ts":1640464900}},"2":{"2":{"get_star_ts":1638531040},"1":{"get_star_ts":1638530779}},"11":{"2":{"get_star_ts":1639238049},"1":{"get_star_ts":1639237143}},"1":{"2":{"get_star_ts":1638361995},"1":{"get_star_ts":1638361174}},"3":{"1":{"get_star_ts":1638532084},"2":{"get_star_ts":1638533821}},"23":{"1":{"get_star_ts":1640263619}},"8":{"2":{"get_star_ts":1639099463},"1":{"get_star_ts":1638964079}},"9":{"1":{"get_star_ts":1639052333},"2":{"get_star_ts":1639104569}},"22":{"1":{"get_star_ts":1640175399}},"20":{"1":{"get_star_ts":1640480782},"2":{"get_star_ts":1640480996}},"5":{"2":{"get_star_ts":1638708930},"1":{"get_star_ts":1638705948}},"21":{"1":{"get_star_ts":1640139780}},"14":{"1":{"get_star_ts":1639483689},"2":{"get_star_ts":1640300352}},"12":{"2":{"get_star_ts":1639347535},"1":{"get_star_ts":1639346569}}},"local_score":632,"stars":35,"id":"1105834","last_star_ts":1640480996,"name":"Sarah Ball","global_score":0},"1624263":{"name":"wwestfall91","global_score":0,"id":"1624263","stars":13,"last_star_ts":1639157262,"local_score":219,"completion_day_level":{"6":{"1":{"get_star_ts":1638824102},"2":{"get_star_ts":1638931149}},"2":{"2":{"get_star_ts":1638458153},"1":{"get_star_ts":1638457397}},"1":{"1":{"get_star_ts":1638379104},"2":{"get_star_ts":1638380859}},"3":{"2":{"get_star_ts":1638589861},"1":{"get_star_ts":1638540594}},"10":{"1":{"get_star_ts":1639157262}},"7":{"1":{"get_star_ts":1638933816}},"5":{"1":{"get_star_ts":1638769705}},"4":{"2":{"get_star_ts":1638601095},"1":{"get_star_ts":1638600184}}}},"1632578":{"last_star_ts":1638486997,"id":"1632578","stars":4,"name":"JD","global_score":0,"completion_day_level":{"1":{"1":{"get_star_ts":1638408568},"2":{"get_star_ts":1638410800}},"2":{"2":{"get_star_ts":1638486997},"1":{"get_star_ts":1638486163}}},"local_score":57},"1108620":{"name":"Chris Hutchins","global_score":0,"last_star_ts":"0","id":"1108620","stars":0,"local_score":0,"completion_day_level":{}},"1689898":{"id":"1689898","stars":47,"last_star_ts":1640410204,"global_score":0,"name":"Peter McLarnan","completion_day_level":{"1":{"2":{"get_star_ts":1638416970},"1":{"get_star_ts":1638415710}},"3":{"1":{"get_star_ts":1638510276},"2":{"get_star_ts":1638513637}},"6":{"2":{"get_star_ts":1638770370},"1":{"get_star_ts":1638769139}},"18":{"1":{"get_star_ts":1639815470},"2":{"get_star_ts":1639815668}},"15":{"1":{"get_star_ts":1639546381},"2":{"get_star_ts":1639547636}},"11":{"2":{"get_star_ts":1639201073},"1":{"get_star_ts":1639200894}},"2":{"1":{"get_star_ts":1638425832},"2":{"get_star_ts":1638426677}},"4":{"1":{"get_star_ts":1638606808},"2":{"get_star_ts":1638607920}},"19":{"1":{"get_star_ts":1639950731},"2":{"get_star_ts":1639973335}},"10":{"2":{"get_star_ts":1639125720},"1":{"get_star_ts":1639124195}},"25":{"1":{"get_star_ts":1640410204}},"7":{"2":{"get_star_ts":1638858612},"1":{"get_star_ts":1638857100}},"13":{"1":{"get_star_ts":1639378019},"2":{"get_star_ts":1639379326}},"17":{"1":{"get_star_ts":1639727248},"2":{"get_star_ts":1639730407}},"12":{"2":{"get_star_ts":1639310667},"1":{"get_star_ts":1639301357}},"14":{"1":{"get_star_ts":1639460264},"2":{"get_star_ts":1639468408}},"16":{"2":{"get_star_ts":1639692480},"1":{"get_star_ts":1639690957}},"5":{"1":{"get_star_ts":1638687431},"2":{"get_star_ts":1638689309}},"24":{"2":{"get_star_ts":1640329643},"1":{"get_star_ts":1640329505}},"21":{"2":{"get_star_ts":1640137471},"1":{"get_star_ts":1640068461}},"9":{"1":{"get_star_ts":1639026763},"2":{"get_star_ts":1639031733}},"8":{"2":{"get_star_ts":1638952813},"1":{"get_star_ts":1638943747}},"20":{"1":{"get_star_ts":1639979498},"2":{"get_star_ts":1639979634}},"22":{"2":{"get_star_ts":1640221679},"1":{"get_star_ts":1640216485}}},"local_score":911},"1109424":{"name":"Lisa Ho","global_score":0,"id":"1109424","stars":0,"last_star_ts":"0","local_score":0,"completion_day_level":{}},"1866201":{"completion_day_level":{"1":{"1":{"get_star_ts":1638909804}}},"local_score":6,"stars":1,"id":"1866201","last_star_ts":1638909804,"name":"Guillermo Bautista","global_score":0},"1031380":{"stars":12,"id":"1031380","last_star_ts":1638922303,"name":"deeplusplus","global_score":0,"completion_day_level":{"5":{"2":{"get_star_ts":1638921698},"1":{"get_star_ts":1638921543}},"1":{"1":{"get_star_ts":1638535886},"2":{"get_star_ts":1638572067}},"4":{"2":{"get_star_ts":1638652170},"1":{"get_star_ts":1638651934}},"3":{"1":{"get_star_ts":1638575430}},"6":{"2":{"get_star_ts":1638917087},"1":{"get_star_ts":1638917072}},"7":{"1":{"get_star_ts":1638922303}},"2":{"2":{"get_star_ts":1638573110},"1":{"get_star_ts":1638572713}}},"local_score":157},"1108809":{"local_score":31,"completion_day_level":{"2":{"2":{"get_star_ts":1638586544},"1":{"get_star_ts":1638585499}},"1":{"2":{"get_star_ts":1638584322},"1":{"get_star_ts":1638583910}}},"global_score":0,"name":"Scott Krumrei","stars":4,"id":"1108809","last_star_ts":1638586544}},"owner_id":"1031380","event":"2021"}
function parseJson() {
    //objects I THINK I might need to go for - ultimately scores and position will need to be calculated as I go based on starDates to animate...
    // membersArray = [
    //         {
    //             id: 1234,
    //             name: 'Sarah"',
    //         }
    //     ]
    // starDates = [
    //     {
    //         timestamp: new Date(),
    //         memberId: '1234' //so I can find the right element
    //         star: [day, part]
    //     }
    // ]

    let membersArray = [];
    let starDates = [];
    let tempMember;
    let tempStars;
    for (entry in scoresJson.members) {
        tempMember = scoresJson.members[entry];
        membersArray.push({
            id: tempMember.id,
            name: tempMember.name
        });

        tempStars = scoresJson.members[entry].completion_day_level
        for (star in tempStars) {
            for (part in tempStars[star]) {
                starDates.push({
                    timestamp: new Date(tempStars[star][part].get_star_ts * 1000), //used https://www.reddit.com/r/adventofcode/comments/a4ma4o/private_leaderboard_star_times_display to figure out how the date/time should be parsed
                    memberId: tempMember.id,
                    star: [parseInt(star), parseInt(part)]
                });
            }
        }
    }

    return [membersArray, starDates];
}

let parsed = parseJson();
let members = parsed[0];
let stardates = parsed[1].sort((first, second) => (first.timestamp < second.timestamp ? 1 : -1));
let starPointsAvailable = generateInitialStarValues(members.length);
let memberToScoreMapScores = initializeMemberScores(members);


let countDownTime = new Date('December 1, 2021 01:00:00');
let countDownStop = Date.now();

let dateChange = false;
let runOnce = true;

let countdown = setInterval(function () {
    if (runOnce) { //hack - I'll deal with it later...
        runOnce = false;
        let newElement = createMemberRows(members)
        let memberRows = document.getElementById("member-rows");
        memberRows.parentNode.replaceChild(newElement, memberRows);
    }

    if (countDownTime < countDownStop) {
        let newDate = dateAdd(countDownTime, 'minute', 1);
        dateChange = newDate.getDate() != countDownTime.getDate();
        countDownTime = newDate
        document.getElementById("countdown").innerHTML = customDateFormat(countDownTime);

        if (dateChange) {
            dateChange = false;
            let dateToUpdate = countDownTime.getDate();

            //Update links of numbers
            let linkedSingleDigitATag = createDayATag(dateToUpdate)
            let parentRowElement = document.getElementsByClassName("privboard-days");
            let elementToUpdate = parentRowElement[0].children[dateToUpdate - 1];
            elementToUpdate.parentNode.replaceChild(linkedSingleDigitATag, elementToUpdate);

            //Update stars for day to "unlocked"
            let memberRows = document.getElementsByClassName("mem-row");
            for (let i = 0; i < memberRows.length; i++) {
                let innerSpans = memberRows[i].children;
                //index 0 is position
                //index 1 is score
                //index 2-27 are stars
                innerSpans[dateToUpdate + 2].classList.remove('privboard-star-locked');
                innerSpans[dateToUpdate + 2].classList.add('privboard-star-unlocked');
            }
        }

        //while last item in stardate is less than current time
        while (stardates.length > 0 &&
            stardates[stardates.length - 1].timestamp < countDownTime) {
            let singleStarDate = stardates[stardates.length - 1];
            let memberRow = document.getElementById(singleStarDate.memberId);

            //----------------------------update star----------------------------
            let innerSpans = memberRow.children;
            //index 0 is position
            //index 1 is score
            //index 2-27 are stars

            let dayOfStar = singleStarDate.star[0];
            let part1Or2 = singleStarDate.star[1];
            let starSpan = innerSpans[dayOfStar + 2];
            if (part1Or2 == "1") {
                starSpan.classList.remove('privboard-star-unlocked');
                starSpan.classList.add('privboard-star-firstonly');
            } else {
                starSpan.classList.remove('privboard-star-firstonly');
                starSpan.classList.add('privboard-star-both');
            }

            //----------------------------update score----------------------------
            let priorScore = memberToScoreMapScores[singleStarDate.memberId];
            let pointsForNewStar = starPointsAvailable[dayOfStar + '.' + part1Or2];
            let newScore = priorScore + pointsForNewStar;
            memberToScoreMapScores[singleStarDate.memberId] = newScore;

            innerSpans[1].innerHTML = paddedScores(newScore);
            starPointsAvailable[dayOfStar + '.' + part1Or2] = pointsForNewStar - 1; //deincrement for next winner
            stardates.pop();

            //----------------------------sort rows----------------------------
            let positions = getPositions(memberToScoreMapScores)
            buildOrderedMemberList(positions);
        }
    }
}, 1);


function paddedScores(value) {
    switch (value.toString().length) {
        case 3:
            return "&nbsp" + value ;
        case 2:
            return "&nbsp&nbsp" + value ;
        case 1:
            return "&nbsp&nbsp&nbsp" + value ;
        default:
            return "Bad score value";
    }
}

function customDateFormat(date) {
    return date.getFullYear() + "." + (date.getMonth() + 1).toString().padStart(2, '0') + "." + date.getDate().toString().padStart(2, '0') + " " + date.getHours().toString().padStart(2, '0') + ":" + (date.getMinutes().toString().padStart(2, '0'));
}//                                                      ^because of stupid 0 indexed months

function createDayATag(dayNumber) {
    let linkedSingleDigitATag = document.createElement("a");
    linkedSingleDigitATag.href = "https://adventofcode.com/2021/day/" + dayNumber;
    if (dayNumber < 10) {
        linkedSingleDigitATag.innerText = dayNumber;
    } else {
        let dayDigits = dayNumber.toString().split('');
        const lineBreak = document.createElement('br');
        linkedSingleDigitATag.innerHTML = dayDigits[0] + '<br>' + dayDigits[1];
    }
    return linkedSingleDigitATag
}

/**
 * Adds time to a date. Modelled after MySQL DATE_ADD function.
 * Example: dateAdd(new Date(), 'minute', 30)  //returns 30 minutes from now.
 * https://stackoverflow.com/a/1214753/18511
 * 
 * @param date  Date to start with
 * @param interval  One of: year, quarter, month, week, day, hour, minute, second
 * @param units  Number of units of the given interval to add.
 */
function dateAdd(date, interval, units) {
    if (!(date instanceof Date))
        return undefined;
    var ret = new Date(date); //don't change original date
    var checkRollover = function () { if (ret.getDate() != date.getDate()) ret.setDate(0); };
    switch (String(interval).toLowerCase()) {
        case 'year': ret.setFullYear(ret.getFullYear() + units); checkRollover(); break;
        case 'quarter': ret.setMonth(ret.getMonth() + 3 * units); checkRollover(); break;
        case 'month': ret.setMonth(ret.getMonth() + units); checkRollover(); break;
        case 'week': ret.setDate(ret.getDate() + 7 * units); break;
        case 'day': ret.setDate(ret.getDate() + units); break;
        case 'hour': ret.setTime(ret.getTime() + units * 3600000); break;
        case 'minute': ret.setTime(ret.getTime() + units * 60000); break;
        case 'second': ret.setTime(ret.getTime() + units * 1000); break;
        default: ret = undefined; break;
    }
    return ret;
}

function createMemberRows(members) {
    let containerSpan = document.createElement('span');
    // example element
    // <div id='1105834' class="privboard-row mem-row"><span class="privboard-position"> 1)</span><span class="score"> 000 </span><span class="privboard-star-unlocked">*</span><span class="privboard-star-locked">*</span><span class="privboard-star-locked">*</span><span class="privboard-star-locked">*</span><span class="privboard-star-locked">*</span><span class="privboard-star-locked">*</span><span class="privboard-star-locked">*</span><span class="privboard-star-locked">*</span><span class="privboard-star-locked">*</span><span class="privboard-star-locked">*</span><span class="privboard-star-locked">*</span><span class="privboard-star-locked">*</span><span class="privboard-star-locked">*</span><span class="privboard-star-locked">*</span><span class="privboard-star-locked">*</span><span class="privboard-star-locked">*</span><span class="privboard-star-locked">*</span><span class="privboard-star-locked">*</span><span class="privboard-star-locked">*</span><span class="privboard-star-locked">*</span><span class="privboard-star-locked">*</span><span class="privboard-star-locked">*</span><span class="privboard-star-locked">*</span><span class="privboard-star-locked">*</span><span class="privboard-star-locked">*</span>  <span class="privboard-name">Sarah Ball</span></div>

    for (let i = 0; i < members.length; i++) {
        //Hailey case
        if(members[i].id == '1666139'){
            members[i].name = "Hailey Quinn";
        }
        let outerDiv = document.createElement('div');
        outerDiv.id = members[i].id;
        outerDiv.classList.add("privboard-createMemberRows", "mem-row");
        outerDiv.innerHTML = '<span id="'+members[i].id+'-position" class="privboard-position">'+padAndFormatPosition(i+1)+'</span><span>'+paddedScores(0)+'</span>'
        +'<span class="privboard-star-locked">*</span><span class="privboard-star-unlocked">*</span><span class="privboard-star-locked">*</span><span class="privboard-star-locked">*</span><span class="privboard-star-locked">*</span><span class="privboard-star-locked">*</span><span class="privboard-star-locked">*</span><span class="privboard-star-locked">*</span><span class="privboard-star-locked">*</span><span class="privboard-star-locked">*</span><span class="privboard-star-locked">*</span><span class="privboard-star-locked">*</span><span class="privboard-star-locked">*</span><span class="privboard-star-locked">*</span><span class="privboard-star-locked">*</span><span class="privboard-star-locked">*</span><span class="privboard-star-locked">*</span><span class="privboard-star-locked">*</span><span class="privboard-star-locked">*</span><span class="privboard-star-locked">*</span><span class="privboard-star-locked">*</span><span class="privboard-star-locked">*</span><span class="privboard-star-locked">*</span><span class="privboard-star-locked">*</span><span class="privboard-star-locked">*</span><span class="privboard-star-locked">*</span>  <span class="privboard-name">' + members[i].name + '</span>';
        containerSpan.appendChild(outerDiv);
    }
    return containerSpan;
}

function buildOrderedMemberList(positions){
    for(let memIndex =0; memIndex<positions.length; memIndex++){
        let member = positions[memIndex];
        let memberRow = document.getElementById(member.id);
        let scoreSpan = document.getElementById(member.id+"-position");
        scoreSpan.innerHTML = padAndFormatPosition(memIndex+1);//zero index

        memberRow.parentNode.appendChild(memberRow);
    }
}

function padAndFormatPosition(value){
    switch (value.toString().length) {
        case 1:
            return "&nbsp" + value + ")";
        case 2:
            return value + ")";
        default:
            return "Bad position value";
    }
}

function initializeMemberScores(members) {
    let scores = {};
    for (let i = 0; i < members.length; i++) {
        scores[members[i].id] = 0;
    }
    return scores;
}

function getPositions(memberToScoreMapScores){
    let order = [];

    for(key in memberToScoreMapScores){
        order.push({
            id: key,
            score: memberToScoreMapScores[key]
        });
    }

    order.sort((a,b) => b.score-a.score);

    return order;
}

function generateInitialStarValues(memberNumber) {
    return {
        '1.1': memberNumber,
        '2.1': memberNumber,
        '3.1': memberNumber,
        '4.1': memberNumber,
        '5.1': memberNumber,
        '6.1': memberNumber,
        '7.1': memberNumber,
        '8.1': memberNumber,
        '9.1': memberNumber,
        '10.1': memberNumber,
        '11.1': memberNumber,
        '12.1': memberNumber,
        '13.1': memberNumber,
        '14.1': memberNumber,
        '15.1': memberNumber,
        '16.1': memberNumber,
        '17.1': memberNumber,
        '18.1': memberNumber,
        '19.1': memberNumber,
        '20.1': memberNumber,
        '21.1': memberNumber,
        '22.1': memberNumber,
        '23.1': memberNumber,
        '24.1': memberNumber,
        '25.1': memberNumber,
        '1.2': memberNumber,
        '2.2': memberNumber,
        '3.2': memberNumber,
        '4.2': memberNumber,
        '5.2': memberNumber,
        '6.2': memberNumber,
        '7.2': memberNumber,
        '8.2': memberNumber,
        '9.2': memberNumber,
        '10.2': memberNumber,
        '11.2': memberNumber,
        '12.2': memberNumber,
        '13.2': memberNumber,
        '14.2': memberNumber,
        '15.2': memberNumber,
        '16.2': memberNumber,
        '17.2': memberNumber,
        '18.2': memberNumber,
        '19.2': memberNumber,
        '20.2': memberNumber,
        '21.2': memberNumber,
        '22.2': memberNumber,
        '23.2': memberNumber,
        '24.2': memberNumber,
        '25.2': memberNumber
    }
}
